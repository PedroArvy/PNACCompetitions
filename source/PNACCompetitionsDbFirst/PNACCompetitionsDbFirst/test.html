<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>jQuery UI Autocomplete - Default functionality</title>

  <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
  <script src="https://code.jquery.com/jquery-2.2.3.min.js" integrity="sha256-a23g1Nt4dtEYOj7bR+vTu7+T8VP13humZFBJNIYoEJo=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.0/knockout-min.js"></script>
  <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
  <script src="/Scripts/ko-autocomplete.js"></script>

  <script>

    $(document).ready(function () {


      function Competitor(competitorId, isReferee)
      {
        var self = this;

        //self.Name = ko.observable(name);
        //self.CompetitorId = competitorId;
        self.IsReferee = ko.observable(isReferee);

        self.mySelectedGuid = ko.observable(competitorId);
        self.tempValue = '';
        self.BlurName = function () {
          if (self.mySelectedGuid().length == 0)
            self.mySelectedGuid(self.tempValue);
          return true;
        }
        self.FocusName = function () {
          self.tempValue = self.mySelectedGuid();
          self.mySelectedGuid('');
          return true;
        }

      }

      function Person(guid, name, email) {
        this.guid = ko.observable(guid);
        this.name = ko.observable(name);
        this.email = ko.observable(email);

        this.displayName = ko.dependentObservable(function () {
          return this.name() + " [" + this.email() + "]";
        }, this);
      }

      var viewModel = {
        myPeople: ko.observableArray([
            new Person("1", "Bob Smith", "bsmith@company.com"),
            new Person("2", "Bonnie Johnson", "bjohnson@company.com"),
            new Person("3", "John Daniels", "jdaniels@company.com"),
            new Person("4", "Deborah Danielson", "ddanielson@company.com"),
            new Person("5", "John Daniels", "jxdaniels@company.com")
        ]),
        mySelectedGuid: ko.observable("3"),

        Competitors: ko.observableArray([
          new Competitor("3", true),
          new Competitor("4", false),
        ])

      };

      ko.applyBindings(viewModel);

    });


  </script>


</head>


<body>

  <table class="table table-striped">
    <thead>
      <tr>
        <th>
          <span class="hidden-sm hidden-xs hidden-md">Delete</span>
          <span class="hidden-lg"></span>
        </th>
        <th>Member</th>
        <th>
          <span class="hidden-sm hidden-xs hidden-md">Captain</span>
          <span class="hidden-lg">C</span>
        </th>
        <th>
          <span class="hidden-sm hidden-xs hidden-md">Referee</span>
          <span class="hidden-lg">R</span>
        </th>
      </tr>
    </thead>

    <tbody data-bind="foreach: Competitors">
      <tr>
        <td>
          <input data-bind="event: { blur: BlurName }, click: FocusName, jqAuto: { autoFocus: true }, jqAutoSource: $parent.myPeople, jqAutoValue: mySelectedGuid, jqAutoSourceLabel: 'displayName', jqAutoSourceInputValue: 'name', jqAutoSourceValue: 'guid'" />
          <span data-bind="text:mySelectedGuid"></span>
        </td>

        <td>
          <input type="checkbox" name="Referee" data-bind="checked: IsReferee" />
        </td>

      </tr>
    </tbody>
  </table>

  <input data-bind="jqAuto: { autoFocus: true }, jqAutoSource: myPeople, jqAutoValue: mySelectedGuid, jqAutoSourceLabel: 'displayName', jqAutoSourceInputValue: 'name', jqAutoSourceValue: 'guid'" />


  <div data-bind="text: mySelectedGuid() ? mySelectedGuid() : 'None selected'"></div>




</body>
</html>
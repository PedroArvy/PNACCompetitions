@using PNACCompetitionsDbFirst.Models.ViewModels
@model ResultEdit


<script>

  $(document).ready(function () {

    $('.CatchAndKill, .CatchAndRelease').hide();
    CatchReleaseFields();

      $('.integer').focus(function () {
        if ($(this).val() == '0')
          $(this).val('');
      });

      $('.integer').focusout(function () {
        if ($(this).val().length == 0)
          $(this).val('0');
      });


      $('.CatchAndReleaseRadio').click(function () {
        CatchReleaseFields();
      });


      $('#Quantity').change(function () {
        ShowHideLength();
      });



      function CatchReleaseFields()
      {
        if ($('#CatchAndRelease').is(':checked'))
          ShowCatchReleaseFields();
        else if ($('#CatchAndKill').is(':checked'))
          CatchAndKillFields();
      }


      function ShowCatchReleaseFields() {


        $('.CatchAndKill').hide();
        $('.CatchAndRelease').show();

        $('#LengthDiv').show();
      }


      function CatchAndKillFields() {

        $('.CatchAndRelease').hide();
        $('.CatchAndKill').show();

        ShowHideLength();
      }


      function ShowHideLength()
      {
        if ($('#Quantity').val().length == 0 || $('#Quantity').val() == '1')
          $('#LengthDiv').show();
        else
          $('#LengthDiv').hide();
      }


    });

</script>


<div class="form-group">
  <div class="col-md-10">
    @Html.LabelFor(m => m.EntrantId, new { @class = "pnac-label" })
  </div>
  <div class="col-md-10">
    @Html.DropDownListFor(m => m.EntrantId, Model.Entrants, "Please select")
    <div>@Html.ValidationMessageFor(m => m.EntrantId)</div>
  </div>
</div>


<div class="form-group">
  <div class="col-md-10">
    @Html.LabelFor(m => m.CatchAndRelease, new { @class = "pnac-label" })
  </div>
  <div class="col-md-10 radio-list">
    <input type="radio" id="CatchAndRelease" name="@nameof(Model.CatchAndRelease)" value="Yes" class="CatchAndReleaseRadio"/>Yes
    <input type="radio" id="CatchAndKill" name="@nameof(Model.CatchAndRelease)" value="No" class="CatchAndReleaseRadio"/>No
    <div>@Html.ValidationMessageFor(m => m.CatchAndRelease)</div>
  </div>
</div>

<div class="form-group CatchAndKill CatchAndRelease">
  <div class="col-md-10">
    @Html.LabelFor(m => m.FishId, new { @class = "pnac-label" })
  </div>
  <div class="col-md-10">
    @Html.DropDownListFor(m => m.FishId, Model.Fish, "Please select")
    <div>@Html.ValidationMessageFor(m => m.Fish)</div>
  </div>
</div>


<div class="form-group CatchAndKill">
  <div class="col-md-10">
    @Html.LabelFor(m => m.Quantity, new { @class = "pnac-label" })
  </div>
  <div class="col-md-10">
    @Html.DropDownListFor(m => m.Quantity, Model.Numbers, "Please select")
    <div>@Html.ValidationMessageFor(m => m.Quantity)</div>
  </div>
</div>


<div class="form-group CatchAndRelease">
  <input type="hidden" name="@nameof(Model.Quantity)" value="1" />
</div>


<div id="LengthDiv" class="form-group CatchAndKill CatchAndRelease">
  <div class="col-md-10">
    @Html.LabelFor(m => m.Length, new { @class = "pnac-label" })
  </div>
  <div class="col-md-10">
    @Html.DropDownListFor(m => m.Length, Model.Lengths, "Please select")
    <div>@Html.ValidationMessageFor(m => m.Length)</div>
  </div>
</div>


<div class="form-group CatchAndKill">
  <div class="col-md-10">
    @Html.LabelFor(m => m.Weight, new { @class = "pnac-label" })
  </div>
  <div class="col-md-10">
    @Html.TextBoxFor(m => m.Weight, new { @class = "integer"})
    <div>@Html.ValidationMessageFor(m => m.Weight)</div>
  </div>
</div>

@Html.HiddenFor(m => m.CompetitionId)


<div class="form-group">
  <div class="col-md-10">
    <input type="submit" class="btn btn-default save-button" value="Save" />
    <input type="submit" class="btn btn-default save-button not-first-button" value="Save and new" />
    <a href="/fish/index" class="btn btn-default save-button not-first-button">Back to all results</a>
  </div>
</div>